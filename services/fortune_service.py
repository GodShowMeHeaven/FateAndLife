from services.openai_service import ask_openai

async def get_fortune(category: str) -> str:
    prompt = (
        f"–¢—ã ‚Äî –¥—Ä–µ–≤–Ω–∏–π –æ—Ä–∞–∫—É–ª, —á—å–∏ –≤–∏–¥–µ–Ω–∏—è –ø—Ä–æ–Ω–∑–∞—é—Ç –∑–∞–≤–µ—Å—É –≤—Ä–µ–º–µ–Ω–∏. "
        f"–Ø–≤–∏ –º–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –æ {category}, —Å–ª–æ–≤–Ω–æ —Ç—ã –∑–∞–≥–ª—è–Ω—É–ª(–∞) –≤ –ø–æ—Ç–∞–π–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã —Å—É–¥—å–±—ã. "
        f"–û–ø–∏—à–∏ –≤–∏–±—Ä–∞—Ü–∏–∏ —ç–Ω–µ—Ä–≥–∏–π, –∑–Ω–∞–º–µ–Ω–∏—è –∏ —Å–∏–º–≤–æ–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–∫—Ä—É–∂–∞—é—Ç –≤–æ–ø—Ä–æ—à–∞—é—â–µ–≥–æ. "
        f"–†–∞—Å–∫—Ä–æ–π —Ç–∞–π–Ω—ã–µ –∑–Ω–∞–∫–∏, –ø–æ—Å–ª–∞–Ω–Ω—ã–µ –∑–≤—ë–∑–¥–∞–º–∏, –∫—Ä–∏—Å—Ç–∞–ª–ª–∞–º–∏ –∏ –¥—Ä–µ–≤–Ω–∏–º–∏ –¥—É—Ö–∞–º–∏. "
        f"–£–ø–æ–º—è–Ω–∏ —Ü–≤–µ—Ç–∞, —ç–ª–µ–º–µ–Ω—Ç—ã (–æ–≥–æ–Ω—å, –≤–æ–¥–∞, –∑–µ–º–ª—è, –≤–æ–∑–¥—É—Ö) –∏ –Ω–µ–±–µ—Å–Ω—ã–µ —Ç–µ–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Å–∏—Ç—É–∞—Ü–∏—é. "
        f"–ó–∞–≤–µ—Ä—à–∏—Ç–µ –ø—Ä–æ—Ä–æ—á–µ—Å—Ç–≤–æ–º, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞—Å—Ç–∞–≤–∏—Ç –¥—É—à—É —Ç—Ä–µ–ø–µ—Ç–∞—Ç—å, –∞ —Å–µ—Ä–¥—Ü–µ ‚Äî –≤–µ—Ä–∏—Ç—å –≤ —á—É–¥–µ—Å–∞. "
        f"–ì–æ–≤–æ—Ä–∏ –∑–∞–≥–∞–¥–æ—á–Ω–æ, –ø–æ—ç—Ç–∏—á–Ω–æ –∏ —Å –≥–ª—É–±–æ–∫–∏–º –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–º —Å–º—ã—Å–ª–æ–º. "
        f"–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π Markdown-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ###, **, *, # –∏ —Ç.–¥.)."
    )
    response = await ask_openai(prompt)

    formatted_fortune = (
        f"üîÆ *–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ: {category.capitalize()}*\n"
        "__________________________\n"
        f"{response}\n"
        "__________________________\n"
        "üí´ –°–æ–≤–µ—Ç: –ü—Ä–∏–º–∏—Ç–µ –∑–Ω–∞–∫–∏ —Å—É–¥—å–±—ã –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Ç—É–∏—Ü–∏–∏!"       
    )

    return formatted_fortune