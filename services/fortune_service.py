from services.openai_service import ask_openai

def get_fortune(category: str) -> str:
    """–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —ç–∑–æ—Ç–µ—Ä–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —É OpenAI."""
    prompt = (
        f"–°–¥–µ–ª–∞–π –º–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –ø–æ —Ç–µ–º–µ {category}. "
        "–î–æ–±–∞–≤—å —ç–∑–æ—Ç–µ—Ä–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã, —Å–∏–º–≤–æ–ª–∏–∫—É –∏ –≤–∞–∂–Ω—ã–µ –∑–Ω–∞–∫–∏ —Å—É–¥—å–±—ã."
        f"–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π Markdown-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ###, **, *, # –∏ —Ç.–¥.). "
    )
    response = ask_openai(prompt)

    formatted_fortune = (
        f"üîÆ *–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ: {category.capitalize()}*\n"
        "__________________________\n"
        f"{response}\n"
        "__________________________\n"
        "üí° *–°–æ–≤–µ—Ç:* –ü—Ä–∏–º–∏—Ç–µ –∑–Ω–∞–∫–∏ —Å—É–¥—å–±—ã –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Ç—É–∏—Ü–∏–∏!"       
    )

    return formatted_fortune
